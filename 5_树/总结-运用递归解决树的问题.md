## 运用递归解决树的问题

来源：[力扣 leetbook](https://leetcode-cn.com/leetbook/read/data-structure-binary-tree/xefb4e/)

### 一、“自顶向下”的解决方案

“自顶向下” 意味着在每个递归层级，我们将首先访问节点来计算一些值，并在递归调用函数时将这些值传递到子节点。 所以 “自顶向下” 的解决方案可以被认为是一种**前序遍历**。 

具体来说，递归函数 top_down(root, params) 的原理是这样的：

![1617257680429](D:\Code\Algorithm-Python\image\二叉树-总结-自顶向下.png)

### 二、“自底向上”的解决方案

“自底向上” 是另一种递归方法。 在每个递归层次上，我们首先对所有子节点递归地调用函数，然后根据返回值和根节点本身的值得到答案。 这个过程可以看作是**后序遍历**的一种。 通常， “自底向上” 的递归函数 bottom_up(root) 为如下所示：

![](D:/Code/Algorithm-Python/image/二叉树-递归模板-2.png)

### 三、小结

当遇到树问题时，请先思考一下两个问题：

1. 你能确定一些参数，从该节点自身解决出发寻找答案吗？
2. 你可以使用这些参数和节点本身的值来决定什么应该是传递给它子节点的参数吗？

如果答案都是肯定的，那么请尝试使用 `“自顶向下”` 的递归来解决此问题。

或者你可以这样思考：对于树中的任意一个节点，如果你知道它子节点的答案，你能计算出该节点的答案吗？ 如果答案是肯定的，那么 `“自底向上”` 的递归可能是一个不错的解决方法。

### 四、补充

来源 [leetcode网友](https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/solution/python-3di-gui-zi-ding-xiang-xia-zi-di-xiang-shang/)

> 补充说明：这里提到的“自顶向下”和“自底向上”，定义来源是[力扣二叉树探索卡片](https://leetcode-cn.com/leetbook/read/data-structure-binary-tree/xefb4e/)，与一般意义上的定义并不一样。在一般意义上，自底向上写法通常逼格效率更高，也较之于自顶向下难写一点。如果按一般意义上的定义来论，本文的两种方法其实都是属于“自顶向下”。如果这段把您说晕了，忽略就好。只要记得本文只是讨论适用于树的两种递归形式就可以了。

**关于树的递归算法中“自顶向下”和“自底向上”两种方式的浅见**

所谓 **递归**，就是“函数自己调用自己”。在前面那句话中，前面的“自己”是“调用”这一动作的执行者，称为 **调用方**；后面的“自己”是调用这一动作的承受者，称为 **被调用方**。

对于一棵树，给定的已知信息一般是根结点，所以要递归也是从根结点开始。那么根结点自然成为最初的调用方，根结点的子结点则是最初的被调用方。

我们可以把它推广为：在树的递归关系中，父结点为调用方，子结点为被调用方。父子结点是相对而言的，此时的父结点可以是彼时的子结点。

树这种数据结构一般被描绘成一棵倒着长的树，所以父结点是位于上面的结点，子结点则是位于下面的结点，下面是一棵二叉树的例子：


```python
    3
   / \
  9  20
    /  \
   15   7
```
于是也可以说：在树的递归关系中，位于上面的结点是调用方，位于下面的结点是被调用方。

明确了树的结点在递归算法中的双方关系之后，现在来看看“自顶向下”和“自底向上”：

* “自顶向下”的“顶”在树中表现为根结点，“自顶向下”指的就是从根结点向下走。
* “自底向上”的“底”在树中表现为叶结点，“自底向上”指的就是从叶结点向上走。

到这里我们不禁要问问自己，不管是“从根结点向下走”还是“从叶结点向上走”，到底是什么东西在走？是思想？算法？

都不是！我把在“自顶向下”或者“自底向上”过程中走动的东西叫做 **信息流**。

所以，下面是我对“自顶向下”和“自底向上”的定义：

* 树的递归算法中，“自顶向下”指的是信息流从根结点向下走，“自底向上”指的是信息流从叶结点向上走。

如刚才所说，在树的递归关系中，位于上面的结点是调用方，位于下面的结点是被调用方。下面分别考虑这句话在“自顶向下”和“自底向上”中的意义。

对于“自顶向下”，信息流是从调用方流向被调用方。编程语言给我们提供了什么工具，可以让信息流从调用方流向被调用方呢？答案显而易见，就是函数参数。我们可以通过给函数传参的方式让信息流从调用方传送给被调用方。

而对于“自底向上”，信息流是从被调用方流向调用方。这又是如何达成的？也很容易，通过函数返回值就可以将信息流从被调用方传送给调用方。

至此，就引出了“自顶向下”和“自底向上”的最终定义：

* 在树的递归算法中，“自顶向下”指的是通过给函数传参的方式让信息流从根结点向下走，从而求得最终结果的过程。
* 在树的递归算法中，“自底向上”指的是通过函数返回值让信息流从叶结点向上走，从而求得最终结果的过程。

注意：这里说的是一般情况，还有一些方法也可以用于传递信息流，比如为结点对象添加属性，在这里没有细致讨论。总之，只要把握住信息流的传递方向，就能够区分“自顶向下”还是“自底向上”了。

### 五、相关题目

* 力扣 104. 二叉树的最大深度